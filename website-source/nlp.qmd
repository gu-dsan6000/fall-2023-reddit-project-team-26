# NLP

## Executive Summary



## Analysis Report

### Data Checks and Data Cleaning

In this section we performed standard NLP cleaning to clean reddit text data related to College Basketball. We then used that clean data to perform various analyses including identifying discussion on various topics related to college basketball, sentiment analysis of reddit posts, and linking reddit posts to the success of teams throughout the season. 

Let's look at the data before it is cleaned to get an understanding of the distribution of text data. 

:::{#fig-text_lengths layout-ncol=1}
![](../data/plots/text_length_distribution.png){fig-align="center"}

Distribution of text lengths in comments and submissions. 
:::
Here we see that the distribution of text lengths in submissions and comments is heavily right-skewed, but submissions are typically longer, which makes sense as people will write more in a post than in a comment. 

Identifying the most common words is also interesting, but looking at unclean data means the most common words will be “the”, “and”, “a”, etc. Which is not interesting. Lets clean the data first and then look at the most common words. 

The data is cleaned using the following steps: 
1. Tokenize: Create tokens from each word 
2. Remove Stopwords: Remove common words such as “the”, “and”, “or”, etc
3. Lower Case: convert all words to lowercase 
4. Normalize: remove non-standard words and digits, including emojis 
5. Lemmatize: lemmatize all words to group the same word in different forms

Using the clean data let's look at the most common words in our reddit data

::: {#fig-common_words layout-ncol=1}

![](../data/plots/common_words.png){width="350" fig-align="center"}

Most common words in comments and submissions after standard nlp cleaning.
:::

The most common words in comments and submissions align with this being posts and comments about basketball. Words like team, game, final, and win are all sport related words. While there are differences between comments and submissions it's not very clear that there is any pattern in the differences between the top words. We also looked at TF-IDF scores to identify the most important words, the findings of this were not as relevant with words such as: “punish”, “harris”, and “load” being the most important words so we will not further discuss those scores. 

### Identifying Discussion Topics (Business Goals 5 & 6)

Two topics that are related to college basketball are the discussion about top players and the discussion of transfers and the transfer portal. We will look at both of these topics in our reddit data, using only the comments data as our submissions data is so limited. This section will answer business goals 5 and 6. 

*We edited Business goal 5 to remove looking at sentiment of players because the sentiment model was not completed yet. Business goal 6 was also changed so that we are not looking at specific transfers but at the discussion around transferring as a whole which was more time efficient.*

Players, especially the best, are heavily discussed among college basketball fans. Here we look at 9 of the best players of the 2021-2022 season. We chose these players based on their selection to first or second team all America. We removed “Johnny Davis” who was on first team all america but has such a common first and last name that we were worried about picking up discussion on other players with the same name. First we looked at the number of comments that mention each of the players. Kofi Cockburn, Keegan Murray, and Drew Timme have some of the highest mentions. It is interesting to see such a large difference in player mentions among the best players. This could be related to the team the player plays for or how flashy/controversial they are. 

::: {#fig-playercomments layout-ncol=1}
![](../data/plots/comments_perplayer.png){fig-align="center"}

Number of comments in the College Basketball subreddit for each player in the 2021-2022 season. Players displayed are first/second team all americans. 
:::

Over the course of the seasons, certain players also become more or less relevant. Here we see that over the course of the season, there is a lot of variability in which player is the most discussed. However, Keegan Murray and Jaden Ivey are definitely the most mentioned players overall. They were picked #4 and #5 in the 2022 NBA draft so it makes sense that they were so heavily discussed. 

::: {#fig-player_month layout-ncol=1}

![](../data/plots/monthly_topplayer.png){width="350" fig-align="center"}

The most discussed player in the college basketball subreddit in each month of the 2021-2022 season.
:::

Since the NCAA became more flexible with transfers in 2020, there has been a creation of the transfer market in College Basketball. This has led to lots of discussion among whether this is good for the players, the sport, and fans. Additionally, fans talk a lot about who might be transferring and who their team could pick up in the transfer portal. Here we see how much the transfer process is discussed over the course of the season. Transfer discussion rises from January to May, with a spike from March to May. This makes sense because most players decide to transfer after the season is over, which for most teams is in March. This means fans are very reactionary in their discussion about transfers, only talking about it when players are starting to transfer, but not so much during the regular season. 

### Big Wins and Big Losses (Business Goal 7)

We also incorporated two datasets other than the rankings - the schedules (and win-loss records) for Kansas and UNC. These two other datasets will help us answer one of our business goals about how fans react after big wins or big losses.

Let’s examine our two subreddits to see if there are answers to our questions there. First, we take the comment frequency analysis done in question 3 of our EDA analysis as a baseline for this question. We’ll do Kansas first:

::: {#fig-comments_kansas layout-ncol=1}

![](../data/plots/comment_count_kansas.png){fig-align="center"}

Number of comments per day in the 2021-2022 season in the r/jayhawks subreddit
:::

Based on our definition of “big wins” and using the external dataset, we determined that “big wins” occurred on January 11, January 24, February 1, February 5, March 5, March 12, March 25, and April 2. There is a spike in comments on January 24, February 1, March 5, March 25, and April 2 (which is during the end-of-season tournament), but none of these spikes are anywhere close to the comment increase around the tournament championship, which makes sense. We can see that there is an increase in engagement on this subreddit when there is a “big win.”

Based on our definition of “big losses” and using the external dataset, we determined that “big losses” occurred on November 26 and March 1. Wow, very few bad losses for Kansas! On the message boards, the second bad loss has a slight spike. Kansas was blessed with a schedule with few bad losses - the fans seem to have benefitted from that as well. Now, we’ll do the same thing for the other school we selected, UNC. 

::: {#fig-comments_unc layout-ncol=1}

![](../data/plots/comment_count_unc.png){fig-align="center"}

Number of comments per day in the 2021-2022 season in the r/tarheels subreddit
:::
Based on our definition of “big wins”, UNC had big wins on December 1, March 5, and throughout the tournament on March 19, March 25, and April 2. There were slight spikes in the number of comments on December 1 and on the tournament win dates, as well as a huge spike on the day of the loss to Kansas in the tournament. In this chart, there is a clear buildup from the beginning of March throughout the tournament - no other big wins stick out more than those. Based on our definition of “big losses”, UNC had big losses on January 5, January 18, January 22, February 16, and March 11. Many more than Kansas had! The two bad losses in a row in late January were met with a spike in comments - one of the largest up until that point. Additionally, the March 11 loss had a spike as well, probably many fans acknowledging their chagrin heading into the tournament. Overall, big wins or big losses did show up in the comment frequency, but the tournament results were a significantly larger change in comment frequency. 

### External Data 

Our external data centered around answering our business questions by providing the weekly rankings of each team and the results throughout the year of the two teams we chose to focus on: Kansas and UNC. These results were incorporated throughout the answers to the business questions above. The rankings were interesting, especially because one of our teams, UNC, was rarely in the Top 25 (they were somewhat of a Cinderella story!). This gives us some interesting data points on how fans of teams outside of what experts view as the top teams behave. Overall, the rankings were chaotic in the 2021-2022 season, as shown here:

::: {#fig-player_month layout-ncol=1}

![](../data/plots/weekly_rankings.png){fig-align="center"}

The AP top 25 ranking of each team over each week in the 2021-2022 college basketball season
:::
Very few teams made it to the number one spot, and the ones that did rarely stayed there long! Although clearly these rankings don’t always mean something – shown by UNC’s run to make it all the way to the championship game despite rarely being ranked all season – it is useful to have a metric to compare teams to others, especially in the face of ecstatic fanbases. 

